<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>api test</title>
    <script type='text/javascript' src='http://libs.baidu.com/jquery/1.9.0/jquery.min.js'></script>
<style type="text/css">
.related_post_title {

}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}
</style>
<script type="text/javascript">
var apis ; 
function initPage(){
    //加载apis
    $.get('getApis',function(data,status){
       var data = JSON.parse(data);
       apis = data;
       var str = 'status:' + status + '<br>';
       for(var p in apis){
          str += p + ":" + JSON.stringify(apis[p]) + '<br>';
       }
       $("#con").html(str); 
    });
}
$(document).ready(function(){
    initPage(); 
});

function searchApi(){
    var key = $("#command").val();
    if(key == null || key.length == 0) return ;
    var str = '';
    var reg = new RegExp("^" + key);
    if(!reg){
        alert("reg is null");
        return ;
    }
    for(var p in apis){
        if(reg.test(p)){
            str += p + ":" + JSON.stringify(apis[p]) + '<br>';
            console.log(str);
        }
    }
    $("#con").html(str); 
}

$(document).keyup(function(e){
   //$("#con").html($("#command").val()); 
   if(event.keyCode == 13){
       var isFocus = function(){
            return document.activeElement.id == 'command';
       }
       if(isFocus){
            searchApi();
       }else{
        alert(1);
            $("#command").focus();
       }
   }
});
</script>
</head>
<body>
    <input type="text" id="command"/>adfjkas
    <div id="con">

    </div>
</body>
</html>
